<div
  *ngIf="product; else loading"
  class="container mx-auto px-4 sm:px-8 lg:px-16 py-8"
>
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 bg-white p-12">
    <!-- Product Images -->
    <div>
      <div class="relative w-full h-auto overflow-hidden">
        <img
          [src]="imageSelected || product.imagenesUrls[0]"
          [alt]="product.nombre"
          class="w-full h-auto transition-transform duration-500 ease-in-out transform hover:scale-105"
        />
      </div>
      <div class="flex gap-4 py-4 justify-center mt-6 overflow-x-auto">
        <ng-container
          *ngFor="let imageUrl of product.imagenesUrls; let i = index"
        >
          <img
            [src]="imageUrl"
            [alt]="'Imagen ' + (i + 1)"
            (click)="changeImage(imageUrl)"
            class="w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 object-cover rounded-lg cursor-pointer opacity-70 hover:opacity-100 transition-opacity duration-300 transform hover:scale-110 border-2 border-transparent hover:border-black"
          />
        </ng-container>
      </div>
    </div>

    <!-- Product Details -->
    <div class="space-y-6 bg-white p-6">
      <span class="text-sm font-medium leading-none"
        >{{ product.subCategoria.categoria.nombre }} >
        {{ product.subCategoria.nombre }}</span
      >
      <h1
        class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl"
      >
        {{ product.nombre }}
      </h1>
      <div class="space-y-4">
        <p class="leading-7 [&:not(:first-child)]:mt-6">
          SKU: {{ product.sku }}
        </p>
        <p class="leading-7 [&:not(:first-child)]:mt-6">
          Color: {{ product.color }}
        </p>
        <p class="leading-7 [&:not(:first-child)]:mt-6">
          Modelo: {{ product.modelo }}
        </p>
        <p class="leading-7 [&:not(:first-child)]:mt-6">
          Stock: {{ product.stock }}
        </p>
      </div>
      <!-- Price -->
      <div class="flex items-center space-x-4">
        <span class="text-2xl font-semibold">$ {{ product.precioUSD }}</span>
        <span class="text-xl text-gray-500"
          >| S/ {{ product.precioSoles | number : "1.2-2" }}</span
        >
      </div>

      <!-- Buttons -->
      <div class="flex items-center gap-4">
        <a
          class="flex-1 bg-monza-500 text-white px-6 py-3 rounded-lg text-center hover:bg-monza-600 active:bg-monza-700 transition-all"
            [href]="product.link"
            target="_blank"
        >
          Comprar
      </a>
        <a
          class="flex-1 bg-monza-500 text-white px-6 py-3 rounded-lg text-center hover:bg-monza-600 active:bg-monza-700 transition-all"
          [routerLink]="['/shopusa/productos/editar', product.id]"
        >
          Editar
        </a>
        <button
          class="flex-1 bg-monza-500 text-white px-6 py-3 rounded-lg text-center hover:bg-monza-600 active:bg-monza-700 transition-all"
          (click)="onDelete(product.id)"
          *ngIf="isAdmin"
        >
          Eliminar
        </button>
      </div>

      <!-- Product Description -->
      <div class="space-y-4">
        <h3 class="scroll-m-20 text-2xl font-semibold tracking-tight">
          Descripción
        </h3>
        <p class="leading-7 [&:not(:first-child)]:mt-6">
          {{ product.descripcion }}
        </p>
        <h3 class="scroll-m-20 text-2xl font-semibold tracking-tight">
          Caracteristicas
        </h3>
        <ul class="my-6 ml-6 list-disc [&>li]:mt-2">
          <li *ngFor="let caracteristica of product.caracteristica.split('. ')">
            {{ caracteristica.trim() }}
          </li>
        </ul>
      </div>

      <!-- Additional Info -->
    </div>
  </div>
</div>

<ng-template #loading>
  <div
    class="h-screen flex items-center justify-center text-xl font-medium text-gray-600 animate-pulse"
  >
    Cargando información del producto...
  </div>
</ng-template>
